"use strict";(self["webpackChunkform_build"]=self["webpackChunkform_build"]||[]).push([[494],{6925:function(e,t,s){s.d(t,{A:function(){return c}});var r=function(){var e=this,t=e._self._c;return t("input",{class:["py-2.5 px-5 w-full border border-solid rounded-[5px]",e.isErrors?"border-danger":"border-[#cbcccd]"],attrs:{type:e.inputType,inputmode:e.inputMode},domProps:{value:e.inputValue},on:{input:function(t){return e.$emit("input",t.target.value)}}})},o=[],i={name:"FormInput-component",props:{inputType:{type:String,default:"text"},inputMode:{type:String,default:"text"},inputValue:[String,Number],isErrors:{type:Boolean,default:!1}}},a=i,n=s(1656),l=(0,n.A)(a,r,o,!1,null,"8df599e6",null),c=l.exports},1494:function(e,t,s){s.r(t),s.d(t,{default:function(){return u}});var r=function(){var e=this,t=e._self._c;return t("div",{staticClass:"ml-auto w-full xl:w-1/2"},[t("div",{staticClass:"mx-auto w-2/3 sm:w-1/2"},[t("p",{staticClass:"mb-8 font-bold text-3xl"},[e._v("歡迎回來")]),t("ValidationObserver",{ref:"LoginForm"},[t("form",{staticClass:"mb-5"},[t("ValidationProvider",{attrs:{name:"帳號",rules:"required"},scopedSlots:e._u([{key:"default",fn:function({valid:s,errors:r}){return t("div",{staticClass:"mb-5"},[t("label",{attrs:{for:"LoginForm-account"}},[t("span",{staticClass:"text-lg"},[e._v("帳號")]),t("FormInput",{attrs:{id:"LoginForm-account",placeholder:"請輸入帳號","input-value":e.form.account,"is-errors":Boolean(r[0]),state:!r[0]&&(!!s||null)},model:{value:e.form.account,callback:function(t){e.$set(e.form,"account",t)},expression:"form.account"}})],1),t("small",{class:{"text-danger":r[0]}},[e._v(e._s(r[0]))])])}}])}),t("ValidationProvider",{attrs:{name:"密碼",rules:"required"},scopedSlots:e._u([{key:"default",fn:function({valid:s,errors:r}){return t("div",{},[t("label",{attrs:{for:"LoginForm-password"}},[t("span",{staticClass:"text-lg"},[e._v("密碼")]),t("button",{staticClass:"inline ml-4 text-[#54588c] underline hover:font-bold hover:underline",attrs:{type:"button"},on:{click:function(t){return t.preventDefault(),e.$store.dispatch("isModal",!0)}}},[e._v(" 忘記密碼 ")]),t("div",{staticClass:"relative z-0"},[t("FormInput",{staticClass:"pr-11",attrs:{id:"LoginForm-password",placeholder:"請輸入密碼","input-type":e.is_show?"text":"password","input-value":e.form.password,"is-errors":Boolean(r[0]),state:!r[0]&&(!!s||null)},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}}),t("font-awesome-icon",{staticClass:"absolute top-1/2 right-5 cursor-pointer -translate-y-1/2",attrs:{size:"lg",icon:["fa-regular",e.is_show?"fa-eye":"fa-eye-slash"]},on:{click:function(t){t.preventDefault(),e.is_show=!e.is_show}}})],1)]),t("small",{class:{"text-danger":r[0]}},[e._v(e._s(r[0]))])])}}])})],1)]),t("div",{staticClass:"mb-5"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.is_remember,expression:"is_remember"}],staticClass:"hidden",attrs:{id:"is-remember",type:"checkbox"},domProps:{checked:Array.isArray(e.is_remember)?e._i(e.is_remember,null)>-1:e.is_remember},on:{change:function(t){var s=e.is_remember,r=t.target,o=!!r.checked;if(Array.isArray(s)){var i=null,a=e._i(s,i);r.checked?a<0&&(e.is_remember=s.concat([i])):a>-1&&(e.is_remember=s.slice(0,a).concat(s.slice(a+1)))}else e.is_remember=o}}}),t("label",{staticClass:"pl-8 checkbox-control",attrs:{for:"is-remember"}},[e._v("記住帳號")])]),t("button",{staticClass:"mb-10 py-3 w-full rounded-full bg-[#54588c] hover:bg-[#3a3b72] text-white font-bold text-2xl",attrs:{type:"button"},on:{click:function(t){return t.preventDefault(),e.login.apply(null,arguments)}}},[e._v(" 立即登入 ")]),t("router-link",{staticClass:"inline text-[#54588c] text-lg underline hover:font-bold hover:underline",attrs:{to:{name:"Register"}}},[e._v("立即註冊")])],1)])},o=[],i=(s(4114),s(6925)),a={name:"Login-page",components:{FormInput:i.A},data:()=>({form:{account:"",password:""},is_show:!1,is_remember:!1,cookies_IsRemember:"FORM_IsRemember",cookies_Account:"FORM_Account"}),metaInfo:{title:"登入"},created(){this.rememberStatus()},methods:{rememberStatus(){const e=!!localStorage.getItem(this.cookies_IsRemember);e&&(this.form=this.$cookies.get(this.cookies_Account),this.is_remember=!0)},login(){this.$refs.LoginForm.validate().then((e=>{e?this.axios.login(this.form).then((e=>{const{code:t,data:s}=e.data;200===t&&(this.is_remember?(localStorage.setItem(this.cookies_IsRemember,"1"),this.$cookies.set(this.cookies_Account,JSON.stringify(this.form),-1)):(localStorage.removeItem(this.cookies_IsRemember),this.$cookies.remove(this.cookies_Account)),localStorage.setItem("FORM_LoginStatus",!0),localStorage.setItem("FORM_User",JSON.stringify({id:s.id,name:s.name})),this.$cookies.set("FORM_Token",s.token,3600),this.$store.dispatch("set_userInfo",{id:s.id,name:s.name}),this.$store.dispatch("changeLoginStatus",!0),this.$router.push({name:"GeneralList"}))})):this.$toasted.error("登入資料未填寫完全",{position:"top-center"})}))}}},n=a,l=s(1656),c=(0,l.A)(n,r,o,!1,null,"d19f2912",null),u=c.exports}}]);